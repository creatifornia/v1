const CRUCIAL_PATHS=["currency.ISO_4217","club.plan_id","lang.ISO_639","country.ISO_3166_1_alfa_2"],MAX_RETRIES=10,RETRY_INTERVAL=200,WAIT_TIME_AFTER_FAILURE=3e4;function initCreatifornia(){const e=localStorage.getItem("AuthToken");e&&(xano.setAuthToken(e),xano.get("/offices").then((e=>{e&&e.body&&(localStorage.setItem("offices",JSON.stringify(e.body)),validateCrucialPaths(e.body,0))})).catch((e=>{console.error("❌ Error al obtener datos de Creatifornia:",e)})))}function validateCrucialPaths(e,t){if(allCrucialPathsExist(e))return console.log("💼 Offices"),void document.dispatchEvent(new Event("creatifornia-ready"));t<MAX_RETRIES?setTimeout((()=>{validateCrucialPaths(JSON.parse(localStorage.getItem("offices")||"{}"),t+1)}),RETRY_INTERVAL):(console.warn("⚠️ Crucial paths no encontrados tras múltiples intentos. Esperando 30 segundos para reintentar."),setTimeout((()=>{document.dispatchEvent(new Event("get-creatifornia"))}),WAIT_TIME_AFTER_FAILURE))}function allCrucialPathsExist(e){return CRUCIAL_PATHS.every((t=>{const n=getNestedValue(e,t);return null!=n}))}function getNestedValue(e,t){return t.split(".").reduce(((e,t)=>e&&void 0!==e[t]?e[t]:void 0),e)}document.addEventListener("DOMContentLoaded",initCreatifornia),document.addEventListener("get-creatifornia",initCreatifornia);