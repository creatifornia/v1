document.addEventListener("creatifornia-ready",initOptions);const CURRENT_SYSTEM_VERSION="v1.0";function initOptions(){const o=localStorage.getItem("AuthToken"),t=localStorage.getItem("options"),e=new URLSearchParams(window.location.search).has("update");if(e&&t&&(console.log("ü¶ß Options by URL"),localStorage.removeItem("options")),t&&!e)try{if(JSON.parse(t).version===CURRENT_SYSTEM_VERSION)return document.dispatchEvent(new Event("options-ready")),void console.log("ü¶ß Options");localStorage.removeItem("options")}catch(r){console.warn("Corrupted options, refreshing..."),localStorage.removeItem("options")}if(o){xano.setAuthToken(o);const s=o=>{const t={};return o.forEach((o=>{Object.entries(o).forEach((([o,e])=>{if(Array.isArray(e)){const n=e.find((o=>o.options)),r=e.find((o=>o.message));t[o]={options:n?.options||[],message:r?.message||"Elige una opci√≥n"}}else"object"==typeof e&&null!==e&&(t[o]=e)}))})),t};function n(o){try{const t=JSON.parse(localStorage.getItem("offices")||"{}");return o.split(".").reduce(((o,t)=>o?.[t]),t)}catch(o){return console.error("‚ùå Error parsing offices from localStorage:",o),null}}(async()=>{try{const o=n("country.lang.ISO_639"),t=n("country.ISO_3166_1_alfa_2"),e=await xano.get(`/options?lang=${o}&country=${t}`);if(e?.body&&Array.isArray(e.body)){const o={...s(e.body),version:CURRENT_SYSTEM_VERSION};localStorage.setItem("options",JSON.stringify(o)),console.log(`ü¶ß Options ${CURRENT_SYSTEM_VERSION}`,o),document.dispatchEvent(new Event("options-ready"))}}catch(o){console.error("‚ùå Options error:",o)}})()}}