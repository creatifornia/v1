document.addEventListener("creatifornia-ready",fetchData);const CURRENT_DATA_VERSION="v1.0";function fetchData(){(async()=>{const e=localStorage.getItem("AuthToken"),t=localStorage.getItem("data"),a=new URLSearchParams(window.location.search).has("update");if(a&&t&&(console.log("üêé Data API by URL"),localStorage.removeItem("data")),t&&!a)try{if(JSON.parse(t).version===CURRENT_DATA_VERSION)return document.dispatchEvent(new Event("data-api-ready")),void console.log("üêé Data API");localStorage.removeItem("data")}catch(e){console.warn("Corrupted data, refreshing..."),localStorage.removeItem("data")}if(e){xano.setAuthToken(e);try{const e=await xano.get("/data");if(e?.body){const t=e=>{if(Array.isArray(e)){let a={};return e.forEach((e=>{"object"==typeof e&&null!==e&&Object.keys(e).forEach((o=>{a[o]=t(e[o])}))})),a}if("object"==typeof e&&null!==e){let a={};return Object.keys(e).forEach((o=>{a[o]=t(e[o])})),a}return e},a=t(e.body);a.version=CURRENT_DATA_VERSION,localStorage.setItem("data",JSON.stringify(a)),console.log(`üêé Data API (${CURRENT_DATA_VERSION})`),document.dispatchEvent(new Event("data-api-ready"))}}catch(e){console.error("‚ùå Data fetch error:",e)}}})()}