const CRUCIAL_PATHS=["country.currency.ISO_4217","club.plan_id","country.lang.ISO_639","country.ISO_3166_1_alfa_2"],MAX_RETRIES=10,RETRY_INTERVAL=200,WAIT_TIME_AFTER_FAILURE=3e4;function initCreatifornia(){const t=localStorage.getItem("AuthToken");t&&(xano.setAuthToken(t),xano.get("/offices").then((t=>{t&&t.body&&(localStorage.setItem("offices",JSON.stringify(t.body)),validateCrucialPaths(t.body,0))})).catch((t=>{console.error("❌ Error al obtener datos de Creatifornia:",t)})))}function validateCrucialPaths(t,e){if(allCrucialPathsExist(t))return console.log("💼 Offices"),void document.dispatchEvent(new Event("creatifornia-ready"));e<MAX_RETRIES?setTimeout((()=>{validateCrucialPaths(JSON.parse(localStorage.getItem("offices")||"{}"),e+1)}),RETRY_INTERVAL):(console.warn("⚠️ Crucial paths no encontrados tras múltiples intentos. Esperando 30 segundos para reintentar."),setTimeout((()=>{document.dispatchEvent(new Event("get-creatifornia"))}),WAIT_TIME_AFTER_FAILURE))}function allCrucialPathsExist(t){return CRUCIAL_PATHS.every((e=>{const n=getNestedValue(t,e);return null!=n}))}function getNestedValue(t,e){return e.split(".").reduce(((t,e)=>t&&void 0!==t[e]?t[e]:void 0),t)}document.addEventListener("DOMContentLoaded",initCreatifornia),document.addEventListener("get-creatifornia",initCreatifornia);