!function(){"use strict";function e(e){if(!(e&&e instanceof Element))return;const t=e.closest("[component-id]");function c(e){if(!e)return;const t=e.tagName&&e.tagName.toLowerCase(),c=e.getAttribute&&(e.getAttribute("type")||"").toLowerCase();if("textarea"===t)e.value="";else if("select"===t)try{e.selectedIndex=-1}catch(t){e.value=""}else if("input"===t)"checkbox"===c||"radio"===c?e.checked=!1:e.value="";else try{e.value=""}catch(e){}try{e.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}}if(!t)return void c(e);const n=e.getAttribute&&e.getAttribute("cf-json-path");let r=null;n&&(r=t.querySelector(`input[type="hidden"][cf-json-path="${n}"]`)),r||(r=t.querySelector('input[type="hidden"][cf-json-path]'));const o=(t.getAttribute("input-type")||"checkbox").toLowerCase();if(r){r.value="checkbox"===o?"[]":"radio"===o?"{}":"";try{r.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}}if("hidden"===e.type){const e=t.getAttribute("f-class")||"",c=t.getAttribute("l-class")||"",n=t.querySelector('[role="group"]');n&&n.querySelectorAll("[native-button], input, textarea, select").forEach((t=>{try{if(t instanceof HTMLInputElement&&("checkbox"===t.type||"radio"===t.type))t.checked=!1;else if(t.value="",void 0!==t.selectedIndex)try{t.selectedIndex=-1}catch(e){}const n=t.closest("[c-field]");n&&e&&n.classList.remove(e);const r=n&&n.querySelector("[c-label]");r&&c&&r.classList.remove(c);try{t.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}}catch(e){}}))}else c(e)}document.addEventListener("valid-change-checkbox",(t=>{try{const c=t.detail||{},n=c.componentId,r=!!c.dependencies,o=Array.isArray(c.currentValue)?c.currentValue:[],a=o.map((e=>String(e.value))),l=c.jsonPath||null,s=c.continueButtonId||null;if(console.debug("CBX-2: received valid-change-checkbox",{componentId:n,jsonPath:l,currentValue:o,continueButtonId:s,dependencies:r}),!n)return;const i=document.querySelector(`[component-id="${n}"]`);if(!i)return void console.debug("CBX-2: componente no encontrado",n);const d=i.closest("[cf-form-submit]")||document;if(l){let e=i.querySelector(`input[cf-json-path="${l}"]`);if(e||(e=i.querySelector('input[type="hidden"][cf-json-path]')),e)try{e.value=JSON.stringify(o),e.dispatchEvent(new Event("change",{bubbles:!0})),console.debug("CBX-2: updated component hidden",{compHidden:e,newValue:e.value})}catch(e){console.error("CBX-2: error setting hidden value",e)}else console.debug("CBX-2: hidden input no encontrado en el componente para jsonPath",l)}if(!r)return;d.querySelectorAll(`[display-depend="${n}"]`).forEach((t=>{try{const c=t.getAttribute("match");if(c?a.includes(String(c).trim()):a.length>0){t.querySelectorAll('input[type="hidden"][cf-json-path]').forEach((t=>{try{e(t)}catch(e){console.warn("clearHidden on show failed",e)}}));const c=t.getAttribute("f-class")||"",n=t.getAttribute("l-class")||"";t.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach((e=>{try{e.checked=!1;const t=e.closest("[c-field]");t&&c&&t.classList.remove(c);const r=t&&t.querySelector("[c-label]");r&&n&&r.classList.remove(n);try{e.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}}catch(e){}})),t.style.display=""}else{t.style.display="none",t.querySelectorAll('input[type="hidden"][cf-json-path]').forEach((t=>{try{e(t)}catch(e){console.warn("clearHidden on hide failed",e)}}));const c=t.getAttribute("f-class")||"",n=t.getAttribute("l-class")||"";t.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach((e=>{try{e.checked=!1;const t=e.closest("[c-field]");t&&c&&t.classList.remove(c);const r=t&&t.querySelector("[c-label]");r&&n&&r.classList.remove(n);try{e.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}}catch(e){}}))}}catch(e){console.error("CBX-2: error handling display-node",e)}}));if(d.querySelectorAll(`[required-depend="${n}"]`).forEach((t=>{try{const c=t.getAttribute("match"),n=Array.from(t.querySelectorAll("[cf-json-path]")).filter((e=>e&&e.matches&&e.matches("input,textarea,select")));(c?a.includes(String(c).trim()):a.length>0)?n.forEach((e=>{e.setAttribute("data-required","");try{e.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}console.debug("CBX-2: set data-required on",e)})):n.forEach((t=>{const c=t.getAttribute("always-required");if("true"===String(c).trim().toLowerCase())console.debug("CBX-2: candidate has always-required, skipping removal for",t);else{t.removeAttribute("data-required");try{e(t)}catch(e){}try{t.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}console.debug("CBX-2: removed data-required and cleared",t)}}))}catch(e){console.error("CBX-2: error handling required-node",e)}})),s)try{document.dispatchEvent(new CustomEvent("trigger-validate-continue",{detail:{continueButtonId:s}}))}catch(t){}}catch(e){console.error("CBX-2 handler error",e)}}))}();