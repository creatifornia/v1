!function(){"use strict";document.addEventListener("valid-change-checkbox",(e=>{try{const t=e.detail||{},n=t.componentId,c=!!t.dependencies,r=Array.isArray(t.currentValue)?t.currentValue:[],o=r.map((e=>String(e.value))),a=t.jsonPath||null,i=t.continueButtonId||null;if(console.debug("CBX-2: received valid-change-checkbox",{componentId:n,jsonPath:a,currentValue:r,continueButtonId:i,dependencies:c}),!n)return;const l=document.querySelector(`[component-id="${n}"]`);if(!l)return void console.debug("CBX-2: componente no encontrado",n);const s=l.closest("[cf-form-submit]")||document;if(a){let e=l.querySelector(`input[cf-json-path="${a}"]`);if(e||(e=l.querySelector('input[type="hidden"][cf-json-path]')),e)try{e.value=JSON.stringify(r),e.dispatchEvent(new Event("change",{bubbles:!0})),console.debug("CBX-2: updated component hidden",{compHidden:e,newValue:e.value})}catch(e){console.error("CBX-2: error setting hidden value",e)}else console.debug("CBX-2: hidden input no encontrado en el componente para jsonPath",a)}if(!c)return;s.querySelectorAll(`[display-depend="${n}"]`).forEach((e=>{const t=e.getAttribute("match"),n=t?o.includes(String(t).trim()):o.length>0;e.style.display=n?"":"none"}));if(s.querySelectorAll(`[required-depend="${n}"]`).forEach((e=>{const t=e.getAttribute("match"),n=Array.from(e.querySelectorAll("[cf-json-path]")).filter((e=>e&&e.matches&&e.matches("input,textarea,select")));(t?o.includes(String(t).trim()):o.length>0)?n.forEach((e=>{e.setAttribute("data-required","");try{e.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}console.debug("CBX-2: set data-required on",e)})):n.forEach((e=>{const t=e.getAttribute("always-required");if("true"===String(t).trim().toLowerCase())console.debug("CBX-2: candidate has always-required, skipping removal for",e);else{e.removeAttribute("data-required");try{!function(e){if(!(e&&e instanceof Element))return;const t=e.closest("[component-id]");function n(e){if(!e)return;const t=e.tagName&&e.tagName.toLowerCase(),n=e.getAttribute&&(e.getAttribute("type")||"").toLowerCase();if("textarea"===t)e.value="";else if("select"===t)try{e.selectedIndex=-1}catch(t){e.value=""}else if("input"===t)"checkbox"===n||"radio"===n?e.checked=!1:e.value="";else try{e.value=""}catch(e){}try{e.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}}if(!t)return void n(e);const c=e.getAttribute&&e.getAttribute("cf-json-path");let r=null;c&&(r=t.querySelector(`input[type="hidden"][cf-json-path="${c}"]`)),r||(r=t.querySelector('input[type="hidden"][cf-json-path]'));const o=(t.getAttribute("input-type")||"checkbox").toLowerCase();if(r){r.value="checkbox"===o?"[]":"radio"===o?"{}":"";try{r.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}}if("hidden"===e.type){const e=t.getAttribute("f-class")||"",n=t.getAttribute("l-class")||"",c=t.querySelector('[role="group"]');c&&c.querySelectorAll("[native-button], input, textarea, select").forEach((t=>{try{if(t instanceof HTMLInputElement&&("checkbox"===t.type||"radio"===t.type))t.checked=!1;else if(t.value="",void 0!==t.selectedIndex)try{t.selectedIndex=-1}catch(e){}const c=t.closest("[c-field]");c&&e&&c.classList.remove(e);const r=c&&c.querySelector("[c-label]");r&&n&&r.classList.remove(n);try{t.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}}catch(e){}}))}else n(e)}(e)}catch(e){}try{e.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}console.debug("CBX-2: removed data-required and cleared",e)}}))})),i)try{document.dispatchEvent(new CustomEvent("trigger-validate-continue",{detail:{continueButtonId:i}}))}catch(e){}}catch(e){console.error("CBX-2 handler error",e)}}))}();