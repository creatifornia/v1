!function(){"use strict";function e(e){if(!(e&&e instanceof Element))return;const t=e.closest("[component-id]");function n(e){if(!e)return;const t=e.tagName&&e.tagName.toLowerCase(),n=e.getAttribute&&(e.getAttribute("type")||"").toLowerCase();if("textarea"===t)e.value="";else if("select"===t)try{e.selectedIndex=-1}catch(t){e.value=""}else if("input"===t)"checkbox"===n||"radio"===n?e.checked=!1:e.value="";else try{e.value=""}catch(e){}try{e.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}}if(!t)return void n(e);const c=e.getAttribute&&e.getAttribute("cf-json-path");let r=null;c&&(r=t.querySelector(`input[type="hidden"][cf-json-path="${c}"]`)),r||(r=t.querySelector('input[type="hidden"][cf-json-path]'));const o=(t.getAttribute("input-type")||"checkbox").toLowerCase();if(r){r.value="checkbox"===o?"[]":"radio"===o?"{}":"";try{r.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}}if("hidden"===e.type){const e=t.getAttribute("f-class")||"",n=t.getAttribute("l-class")||"",c=t.querySelector('[role="group"]');c&&c.querySelectorAll("[native-button], input, textarea, select").forEach((t=>{try{if(t instanceof HTMLInputElement&&("checkbox"===t.type||"radio"===t.type))t.checked=!1;else if(t.value="",void 0!==t.selectedIndex)try{t.selectedIndex=-1}catch(e){}const c=t.closest("[c-field]");c&&e&&c.classList.remove(e);const r=c&&c.querySelector("[c-label]");r&&n&&r.classList.remove(n);try{t.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}}catch(e){}}))}else n(e)}document.addEventListener("valid-change-checkbox",(t=>{try{const n=t.detail||{},c=n.componentId,r=!!n.dependencies,o=Array.isArray(n.currentValue)?n.currentValue:[],a=o.map((e=>String(e.value))),l=n.jsonPath||null,i=n.continueButtonId||null;if(console.debug("CBX-2: received valid-change-checkbox",{componentId:c,jsonPath:l,currentValue:o,continueButtonId:i,dependencies:r}),!c)return;const s=document.querySelector(`[component-id="${c}"]`);if(!s)return void console.debug("CBX-2: componente no encontrado",c);const u=s.closest("[cf-form-submit]")||document;if(l){let p=s.querySelector(`input[cf-json-path="${l}"]`);if(p||(p=s.querySelector('input[type="hidden"][cf-json-path]')),p)try{p.value=JSON.stringify(o),p.dispatchEvent(new Event("change",{bubbles:!0})),console.debug("CBX-2: updated component hidden",{compHidden:p,newValue:p.value})}catch(y){console.error("CBX-2: error setting hidden value",y)}else console.debug("CBX-2: hidden input no encontrado en el componente para jsonPath",l)}if(!r)return;function d(e){try{return JSON.parse(e)}catch{return null}}function h(e){e.querySelectorAll('input[type="hidden"][cf-json-path]').forEach((e=>{const t=e.closest("[component-id]")||e.parentElement,n=(t&&t.getAttribute("input-type")||"checkbox").toLowerCase(),c=t&&t.getAttribute("f-class")||"",r=t&&t.getAttribute("l-class")||"",o=t?t.querySelector('[role="group"]'):null;o&&o.querySelectorAll("[native-button], input, textarea, select").forEach((e=>{try{if(e instanceof HTMLInputElement&&("checkbox"===e.type||"radio"===e.type))e.checked=!1;else if(e instanceof HTMLSelectElement)try{e.selectedIndex=-1}catch(t){e.value=""}else(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&(e.value="");const t=e.closest("[c-field]");t&&c&&t.classList.remove(c);const n=t&&t.querySelector("[c-label]");n&&r&&n.classList.remove(r)}catch(e){}}));const a=d(e.value);if("checkbox"===n)Array.isArray(a)&&a.length&&o&&a.forEach((e=>{const t=String(e.value);o.querySelectorAll("[native-button], input").forEach((e=>{try{if(String(e.getAttribute("data-opt-value"))===t){e instanceof HTMLInputElement&&(e.checked=!0);const t=e.closest("[c-field]");t&&c&&t.classList.add(c);const n=t&&t.querySelector("[c-label]");n&&r&&n.classList.add(r)}}catch(e){}}))}));else if("radio"===n&&a&&"object"==typeof a&&void 0!==a.value&&o){const e=String(a.value);o.querySelectorAll("[native-button], input").forEach((t=>{try{if(String(t.getAttribute("data-opt-value"))===e){t instanceof HTMLInputElement&&(t.checked=!0);const e=t.closest("[c-field]");e&&c&&e.classList.add(c);const n=e&&e.querySelector("[c-label]");n&&r&&n.classList.add(r)}}catch(e){}}))}o&&o.querySelectorAll("[native-button], input").forEach((e=>{try{e.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}}))}))}u.querySelectorAll(`[display-depend="${c}"]`).forEach((t=>{try{const n=t.getAttribute("match");if(n?a.includes(String(n).trim()):a.length>0){try{h(t)}catch(e){console.warn("syncNodeUIFromHidden failed",e)}t.style.display=""}else{t.style.display="none";try{t.querySelectorAll('input[type="hidden"][cf-json-path]').forEach((t=>{try{e(t)}catch(e){console.warn("clearHiddenAndUIForAncestor on hide failed",e)}}))}catch(e){console.warn("error clearing on hide",e)}}}catch(e){console.error("CBX-2: error handling display-node",e)}}));if(u.querySelectorAll(`[required-depend="${c}"]`).forEach((t=>{try{const n=t.getAttribute("match"),c=Array.from(t.querySelectorAll("[cf-json-path]")).filter((e=>e&&e.matches&&e.matches("input,textarea,select")));(n?a.includes(String(n).trim()):a.length>0)?c.forEach((e=>{e.setAttribute("data-required","");try{e.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}console.debug("CBX-2: set data-required on",e)})):c.forEach((t=>{const n=t.getAttribute("always-required");if("true"===String(n).trim().toLowerCase())console.debug("CBX-2: candidate has always-required, skipping removal for",t);else{t.removeAttribute("data-required");try{e(t)}catch(e){}try{t.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}console.debug("CBX-2: removed data-required and cleared",t)}}))}catch(e){console.error("CBX-2: error handling required-node",e)}})),i)try{document.dispatchEvent(new CustomEvent("trigger-validate-continue",{detail:{continueButtonId:i}}))}catch(t){}}catch(f){console.error("CBX-2 handler error",f)}}))}();