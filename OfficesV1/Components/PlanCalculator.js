document.addEventListener("data-ready",(function(){function t(t,e){try{const n=JSON.parse(localStorage.getItem(t));return e.split(".").reduce(((t,e)=>t?.[e]),n)}catch(n){return void console.warn(`⚠️ Error accediendo a ${t}.${e}`)}}if(!!!t("offices","country.currency.cents"))return void document.dispatchEvent(new Event("plan-calculator-cents"));const e=document.querySelectorAll("[plan_calculator]"),n=t("offices","country.currency.ISO_4217"),r=t("offices","country.currency.symbol");n?(e.forEach((e=>{const o=e.getAttribute("plan_id"),a=parseInt(e.getAttribute("limit")||5),c=e.getAttribute("json-path"),l=e.getAttribute("click_this"),s=parseFloat(t("data",`scalable_plans.${o}.${n}.raw_value_1`)),i=parseFloat(t("data",`scalable_plans.${o}.${n}.raw_value_second_unit`));if(isNaN(s)||isNaN(i))return void console.error(`Datos incompletos o inválidos para plan ${o} y moneda ${n}`);const u=e.querySelector("[currency]"),d=e.querySelector("[first_unit][second_unit]"),p=e.querySelector("[symbol]"),y=e.querySelector("[storage_unit]"),f=y?.getAttribute("storage_unit"),m=e.querySelector("[storage_base]"),_=e.querySelector('[cf="disminuir"]')?.closest("a"),v=e.querySelector('[cf="aumentar"]')?.closest("a");u&&(u.textContent=n);const b=parseInt(m?.getAttribute("storage_base"));let g=1,E=s;const S=document.createElement("input");function $(){m&&(m.textContent=b*g),d&&(d.textContent=`${r}${E.toFixed(2)}`),p&&(p.textContent=r),y&&(y.textContent=f),_&&_.classList.toggle("inutil",1===g)}S.type="hidden",S.name=c,S.setAttribute("cf-json-path",c),S.setAttribute("data-required"),S.value=g,e.appendChild(S),_&&_.addEventListener("click",(t=>{t.preventDefault(),g>1&&(g--,E=1===g?s:E-i,$())})),v&&v.addEventListener("click",(t=>{t.preventDefault(),g<a?(g++,E+=i,$()):l&&document.getElementById(l)?.click()})),$()})),document.dispatchEvent(new Event("plan-calculator-ready"))):console.error("No se pudo obtener la moneda")}));