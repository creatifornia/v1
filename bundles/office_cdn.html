<!-------------------------🦩 Creatifornia 🦩------------------------>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Creatifornia/offices-api-v1-1.js" defer></script>
<!-- 💼 Offices.get 💼 -->
<script>
const CRUCIAL_PATHS = [
    'country.currency.ISO_4217',
    'club.plan_id',
    'country.lang.ISO_639',
    'country.ISO_3166_1_alfa_2'
];

const MAX_RETRIES = 10;
const RETRY_INTERVAL = 200;
const CACHE_KEY = 'offices';

class Offices {
    constructor() {
        this._cache = null;
        this._isReady = false;
        this._retryCount = 0;
        // Escuchar directamente el evento offices-ready
        document.addEventListener('offices-ready', () => this._loadData());
    }

    _loadData() {
        try {
            const data = JSON.parse(localStorage.getItem(CACHE_KEY) || '{}');
            
            if (this._verifyData(data)) {
                this._cache = data;
                this._isReady = true;
                document.dispatchEvent(new Event('creatifornia-ready'));
            } else if (this._retryCount < MAX_RETRIES) {
                this._retryCount++;
                setTimeout(() => this._loadData(), RETRY_INTERVAL);
            } else {
                throw new Error('Datos críticos no disponibles después de reintentos');
            }
        } catch (error) {
            console.error('Offices Error:', error);
            document.dispatchEvent(new Event('offices-cache-error'));
        }
    }

    _verifyData(data) {
        return CRUCIAL_PATHS.every(path => {
            const value = path.split('.').reduce((obj, key) => obj?.[key], data);
            return value !== undefined && value !== null && value !== '';
        });
    }

    get(path) {
        if (!this._isReady) {
            console.warn('Offices: Los datos no están listos');
            return null;
        }
        return path.split('.').reduce((obj, key) => obj?.[key], this._cache);
    }
}

// Inicialización automática al cargar el script
window.Offices = new Offices();
</script>


<!-------------------------🦜 Data 🦜-------------------------> 
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Data/Options-API-v1.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Data/Dynamic-API-v1-1.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Data/Dynamic-Cache.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Data/Data-API.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Data/Data-API-Cache.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Data/Translate-API-v1-1.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Data/Translate-Cache.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Data/Events-Data.js" defer></script>


<!------------------------🐳 Fill  🐳 ------------------------>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Fill/Text.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Fill/Inputs.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Fill/Direct.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Fill/Events-Fill.js" defer></script>


<!------------------------🧱 Components 🧱---------------------->
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Components/Options.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Components/Keywords.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Components/Currency-v1-1.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Components/Friendly-URL-v1.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Components/Plan-Calculator-v1-2.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Components/Events-Components.js" defer></script>


<!----------------------- ⚡ Form ⚡ ------------------------->
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Form/form-submit.js" defer></script>

<!------------------------🙉 Display 🙉 ---------------------->
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Display/Translate-Binding-v1.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Display/Display.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Display/Events-Display.js" defer></script>


<!------------------------🐇 Handlers 🐇---------------------->
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Handlers/options-handler.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Handlers/options-checkbox.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Handlers/options-radio.js" defer></script>

<!----------------------- 🐬 Tools 🐬 ------------------------->
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Tools/loader.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Tools/fill-specific-inputs.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Tools/mirror-click-v3.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Tools/modal-error.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Tools/refresh.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Tools/reload-form.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Tools/universal-emojis.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Tools/reset-tabs.js" defer></script>


<!----------------------- 🐞 Uploadcare 🐞  ------------------>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@uploadcare/file-uploader@v1/web/uc-file-uploader-regular.min.css" />
<script src="https://cdn.jsdelivr.net/npm/@uploadcare/file-uploader@v1/web/file-uploader.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@uploadcare/file-uploader@v1/locales/file-uploader/es.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@uploadcare/file-uploader@v1/locales/file-uploader/en.js"></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/office/Uploadcare/Function-v1-1.js" defer></script>




<!------------------------🐸 HTML 🐸-------------------------->
<!-- MODAL response error -->
<div id="error-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
    <div style="background:#292626; padding:2rem; border-radius:1rem; max-width:400px; width:90%; text-align:center; color:#e7cfb1; font-family:sans-serif; box-shadow:0 10px 30px rgba(0,0,0,0.3);">
      <h2 style="margin-bottom:1rem; font-size:18px;">🔔</h2> <!-- Título más pequeño -->
      <p id="error-message" style="margin-bottom:2rem; font-size:20px; font-weight:bold;"></p> <!-- Mensaje más grande -->
      <button onclick="closeErrorModal()" style="background:#e5813e; color:#292626; border:none; padding:0.75rem 1.5rem; border-radius:0.5rem; cursor:pointer; font-weight:bold;">
        Close
      </button>
    </div>
  </div>


