<!-------------------------üêù Params üêù------------------------>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Params/hasParams.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Params/cancelNew.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Params/newPlan.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Params/Events-v1.js" defer></script>

<!-------------------------ü¶© Data ü¶©------------------------>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Data/Offices-v1-1.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Data/Options-v1-1.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Data/Dynamic-v1.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Data/DataAPI.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Data/Translate-v1.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Data/Events-v1.js" defer></script>

<!------------------------üê≥ Fill  üê≥ ------------------------>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Fill/Text-v1-1.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Fill/Inputs-v1.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Fill/Direct.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Fill/Events.js" defer></script>

<!------------------------üß± Components üß±------------------------>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Components/BLD-7.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Components/Keywords.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Components/Currency-v1-1.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Components/FriendlyURL-v1.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Components/PlanCalculator-v1-3.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Components/Events.js" defer></script>


<!----------------------- ‚ö° Form Submit ‚ö° --------------------->
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Form/Submit.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Form/RESET-v5.js" defer></script>

<!------------------------ü¶â Display ü¶â  ------------------------>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Display/Translate.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Display/Click-v2.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Display/Display-v2-1.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Display/Events-v1.js" defer></script>

<!------------------------üêá Options üêá------------------------>

<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Options/RADIO-V10.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Options/CHECKBOX-V10.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Options/CONTINUE-DELAY-v1.js" defer></script>


<!----------------------- üê¨ Tools üê¨ ----------------------->
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Tools/ResetTabs.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Tools/Loader.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Tools/Modal.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Tools/FillEspecificInputs.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Tools/Emojis.js" defer></script>
<script src="https://cdn.jsdelivr.net/gh/creatifornia/v1@main/OfficesV1/Tools/Refresh.js" defer></script>

<!--------------------- üêû Uploadcare (init con data-ready) üêû --------------------->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@uploadcare/file-uploader@v1/web/uc-file-uploader-regular.min.css" />

<script type="module">
  import * as UC from 'https://cdn.jsdelivr.net/npm/@uploadcare/file-uploader@v1/web/file-uploader.min.js';
  import es from 'https://cdn.jsdelivr.net/npm/@uploadcare/file-uploader@v1/locales/file-uploader/es.js';
  import en from 'https://cdn.jsdelivr.net/npm/@uploadcare/file-uploader@v1/locales/file-uploader/en.js';

  // Funci√≥n segura para leer localStorage.offices.path
  function getOffices(path) {
    try {
      const data = JSON.parse(localStorage.getItem("offices") || "{}");
      return path.split('.').reduce((acc, key) => acc?.[key], data);
    } catch (e) {
      console.error("‚ùå Error parsing offices from localStorage:", e);
      return null;
    }
  }

  // Esperamos a que est√© lista la data de offices
  document.addEventListener("data-ready", () => {
    try {
      const langISO = getOffices('lang.ISO_639');

      // decidir idioma seg√∫n condici√≥n
      let chosenLang;
      if (langISO === 'es') {
        UC.defineLocale('es', es);
        chosenLang = 'es';
      } else {
        UC.defineLocale('en', en);
        chosenLang = 'en';
      }

      // definir componentes
      UC.defineComponents(UC);

      // disparar evento confirmando init y el idioma elegido
      document.dispatchEvent(new CustomEvent('uploadcare-ready', {
        detail: { lang: chosenLang }
      }));
      console.log('üêû Uploadcare inicializado ‚Äî idioma:', chosenLang);
    } catch (error) {
      console.error('‚ùå Error initializing UploadCare:', error);

      // Fallback a espa√±ol
      UC.defineLocale('es', es);
      UC.defineComponents(UC);

      document.dispatchEvent(new CustomEvent('uploadcare-ready', {
        detail: { lang: 'es', error: true, message: error.message }
      }));
    }
  });
</script>


<script>
  // Escuchar cuando Uploadcare ya est√° inicializado con chosenLang
  document.addEventListener('uploadcare-ready', (e) => {
    const chosenLang = e.detail?.lang || 'es'; // fallback

    // Buscar todos los <uc-config> y asignarles el idioma elegido
    document.querySelectorAll('uc-config').forEach(cfg => {
      cfg.setAttribute('locale-name', chosenLang);
      console.log(`üåç uc-config (${cfg.getAttribute("ctx-name")}) configurado con locale=${chosenLang}`);
    });
  });
</script>


<!---------------------üê∏ HTML üê∏--------------------->

<!-- üê∏ MODAL response error  üê∏ -->

<div id="error-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
    <div style="background:#292626; padding:2rem; border-radius:1rem; max-width:400px; width:90%; text-align:center; color:#e7cfb1; font-family:sans-serif; box-shadow:0 10px 30px rgba(0,0,0,0.3);">
      <h2 style="margin-bottom:1rem; font-size:18px;">üîî</h2> <!-- T√≠tulo m√°s peque√±o -->
      <p id="error-message" style="margin-bottom:2rem; font-size:20px; font-weight:bold;"></p> <!-- Mensaje m√°s grande -->
      <button onclick="closeErrorModal()" style="background:#e5813e; color:#292626; border:none; padding:0.75rem 1.5rem; border-radius:0.5rem; cursor:pointer; font-weight:bold;">
        Cerrar
      </button>
    </div>
  </div>