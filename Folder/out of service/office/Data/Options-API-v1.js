document.addEventListener("creatifornia-ready",initOptions);const CURRENT_SYSTEM_VERSION="v1.0";function initOptions(){const o=localStorage.getItem("AuthToken"),t=localStorage.getItem("options"),e=new URLSearchParams(window.location.search).has("update");if(e&&t&&(console.log("ü¶ß Options by URL"),localStorage.removeItem("options")),t&&!e)try{if(JSON.parse(t).version===CURRENT_SYSTEM_VERSION)return document.dispatchEvent(new Event("options-ready")),void console.log("ü¶ß Options");localStorage.removeItem("options")}catch(o){console.warn("Corrupted options, refreshing..."),localStorage.removeItem("options")}if(o){xano.setAuthToken(o);const t=o=>{const t={};return o.forEach((o=>{Object.entries(o).forEach((([o,e])=>{if(Array.isArray(e)){const n=e.find((o=>o.options)),s=e.find((o=>o.message));t[o]={options:n?.options||[],message:s?.message||"Elige una opci√≥n"}}else"object"==typeof e&&null!==e&&(t[o]=e)}))})),t};(async()=>{try{const o=window.Offices?.get("country.lang.ISO_639"),e=window.Offices?.get("country.ISO_3166_1_alfa_2"),n=await xano.get(`/options?lang=${o}&country=${e}`);if(n?.body&&Array.isArray(n.body)){const o={...t(n.body),version:CURRENT_SYSTEM_VERSION};localStorage.setItem("options",JSON.stringify(o)),console.log(`ü¶ß Options ${CURRENT_SYSTEM_VERSION}`,o),document.dispatchEvent(new Event("options-ready"))}}catch(o){console.error("‚ùå Options error:",o)}})()}}