document.addEventListener("creatifornia-ready",fetchData);const CURRENT_DATA_VERSION="v1.0";function fetchData(){(async()=>{const t=localStorage.getItem("AuthToken"),e=localStorage.getItem("data"),a=new URLSearchParams(window.location.search).has("update");if(a&&e&&(console.log("üêé Data API by URL"),localStorage.removeItem("data")),e&&!a)try{if(JSON.parse(e).version===CURRENT_DATA_VERSION)return document.dispatchEvent(new Event("data-api")),void console.log("üêé Data API");localStorage.removeItem("data")}catch(t){console.warn("Corrupted data, refreshing..."),localStorage.removeItem("data")}if(t){xano.setAuthToken(t);try{const t=await xano.get("/data");if(t?.body){const e=t=>{if(Array.isArray(t)){let a={};return t.forEach((t=>{"object"==typeof t&&null!==t&&Object.keys(t).forEach((o=>{a[o]=e(t[o])}))})),a}if("object"==typeof t&&null!==t){let a={};return Object.keys(t).forEach((o=>{a[o]=e(t[o])})),a}return t},a=e(t.body);a.version=CURRENT_DATA_VERSION,localStorage.setItem("data",JSON.stringify(a)),console.log(`üêé Data API (${CURRENT_DATA_VERSION})`),document.dispatchEvent(new Event("data-api"))}}catch(t){console.error("‚ùå Data fetch error:",t)}}})()}