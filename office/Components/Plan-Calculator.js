document.addEventListener("data-ready",(function(){const e=document.querySelectorAll("[plan_calculator]"),t=Offices.get("country.currency.ISO_4217"),n=Offices.get("country.currency.symbol")||"$";t?(e.forEach((e=>{const r=e.getAttribute("plan_id"),a=parseInt(e.getAttribute("limit")||5),c=e.getAttribute("json-path"),o=e.getAttribute("click_this"),l=DataAPI.get(`scalable_plans.${r}.${t}.raw_value_1`),u=DataAPI.get(`scalable_plans.${r}.${t}.raw_value_second_unit`);if(!l||!u)return void console.error(`Datos incompletos para plan ${r} y moneda ${t}`);const s=e.querySelector("[currency]"),i=e.querySelector("[first_unit][second_unit]"),d=e.querySelector("[storage_base]"),p=e.querySelector('[cf="disminuir"]')?.closest("a"),m=e.querySelector('[cf="aumentar"]')?.closest("a");s&&(s.textContent=t);const y=parseInt(d?.getAttribute("storage_base")||"200");let b=1,_=l;const f=document.createElement("input");function g(){d&&(d.textContent=y*b),i&&(i.textContent=`${n}${_}`),p&&p.classList.toggle("inutil",1===b)}f.type="hidden",f.name=c,f.setAttribute("cf-json-path",c),f.setAttribute("data-required","true"),f.value=b,e.appendChild(f),p&&p.addEventListener("click",(e=>{e.preventDefault(),b>1&&(b--,_=1===b?l:_-u,g())})),m&&m.addEventListener("click",(e=>{e.preventDefault(),b<a?(b++,_=Number(_)+Number(u),g()):o&&document.getElementById(o)?.click()})),g()})),document.dispatchEvent(new Event("plan-calculator-ready"))):console.error("No se pudo obtener la moneda")}));