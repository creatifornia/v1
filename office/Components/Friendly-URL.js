document.addEventListener("data-ready",(function(){document.querySelectorAll("[json-path][message-path]").forEach((e=>{const t=e.getAttribute("json-path"),n=e.getAttribute("message-path"),r=e.getAttribute("preview-username"),a=e.getAttribute("preview-url-friendly"),i=Dynamic.get(n,"Required*"),u=e.querySelector("[update-this-with-type-username]"),l=e.querySelector("[update-this-with-type-url]"),s=e.querySelector("[text-input-element]"),d=document.createElement("input");function o(e){return/^[\p{L}\p{N}\s_-]$/u.test(e)}function c(){s.classList.add("invalid"),setTimeout((()=>s.classList.remove("invalid")),500)}function p(e){const t=e.trim(),n=t.replace(/-/g,"_").replace(/\s+/g," "),i=e.trim().toLowerCase().replace(/\s+/g,"-").replace(/_/g,"-").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w-]/g,"");u&&(u.textContent=n||Dynamic.get(r,"Username")),l&&(l.textContent=i||Dynamic.get(a,"username")),d.value=JSON.stringify({club_name:t,url_friendly:i})}if(d.type="hidden",d.setAttribute("cf-json-path",t),d.setAttribute("data-required-message",i),d.setAttribute("data-required",""),d.value=JSON.stringify({club_name:"",url_friendly:""}),e.insertBefore(d,e.firstChild),s){let e="";const t=20;s.addEventListener("input",(n=>{const r=n.target.value;if(r.length>t)return s.value=e,void c();const a=r.length>e.length?r.charAt(r.length-1):null;if(a&&!o(a))return s.value=e,void c();e=r,p(r)})),s.addEventListener("keypress",(e=>{o(String.fromCharCode(e.keyCode||e.which))||(e.preventDefault(),c())})),s.addEventListener("paste",(n=>{n.preventDefault();const r=(n.clipboardData||window.clipboardData).getData("text");let a=e;for(const e of r){if(a.length>=t)break;o(e)&&(a+=e)}s.value=a,e=a,p(a),a.length<e.length+r.length&&c()})),p(s.value||""),e=s.value||""}})),document.dispatchEvent(new Event("url-builder-ready"))}));