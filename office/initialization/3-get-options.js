function initOptions(){const t=localStorage.getItem("options"),e=localStorage.getItem("AuthToken"),n=(t=0)=>{const e=JSON.parse(localStorage.getItem("offices")||"{}"),o=e.country?.lang?.ISO_639,s=e.country?.ISO_3166_1_alfa_2;if(o&&s||t>=30){return{lang:o||"es",country:s||"MX"}}return new Promise((e=>{setTimeout((()=>{e(n(t+1))}),50)}))};t?document.dispatchEvent(new Event("cf-options-ready")):e&&(xano.setAuthToken(e),(async()=>{try{const{lang:e,country:o}=await n(),s=`/options?lang=${e}&country=${o}`,i=await xano.get(s);if(i?.body){const n=i.body.reduce(((t,e)=>{const n=Object.keys(e)[0];return t[n]=e[n],t}),{}),s=(t=n,Object.fromEntries(Object.entries(t).map((([t,e])=>{const n=e.find((t=>t.options)),o=e.find((t=>t.message));return[t,{options:n?.options||[],message:o?.message||"Elige una opción"}]}))));localStorage.setItem("options",JSON.stringify(s)),console.log("✅ Options optimized and loaded:",{lang:e,country:o,structure:s}),document.dispatchEvent(new Event("cf-options-ready"))}}catch(t){console.error("❌ Options error:",t)}var t})())}document.addEventListener("creatifornia-ready",initOptions),document.addEventListener("update-options",initOptions);