class DataAPI{constructor(){this._cache=null,this._isReady=!1,this._retryCount=0,this._cacheKey="data",this._maxRetries=5,this._retryInterval=300,this._crucialPaths=["scalable_plans"],this.init()}init(){document.addEventListener("DOMContentLoaded",(()=>{document.addEventListener("data-api",(()=>this._loadData())),this._loadData()}))}_loadData(){try{const t=localStorage.getItem(this._cacheKey);if(!t)throw new Error("No hay datos en caché");const a=JSON.parse(t);if(!this._verifyData(a))throw new Error("Faltan campos críticos");this._cache=a,this._isReady=!0,document.dispatchEvent(new Event("data-api-ready"))}catch(t){console.warn("DataAPI Error:",t.message),this._retryOrFail()}}_verifyData(t){return this._crucialPaths.every((a=>{const e=a.split(".").reduce(((t,a)=>t?.[a]),t);return null!=e&&""!==e}))}_retryOrFail(){this._retryCount<this._maxRetries?(this._retryCount++,setTimeout((()=>this._loadData()),this._retryInterval)):console.error("🐎 DataAPI: Fallo después de reintentos")}get(t){return this._isReady?t.split(".").reduce(((t,a)=>t?.[a]),this._cache):(console.warn("DataAPI: Datos no disponibles"),null)}}window.DataAPI=new DataAPI;