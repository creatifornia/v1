document.addEventListener("creatifornia-ready",dynamicText);const CURRENT_DYNAMIC_TEXT_VERSION="v1.0";function dynamicText(){const t=localStorage.getItem("AuthToken"),e=localStorage.getItem("dynamic_text"),o=new URLSearchParams(window.location.search).has("update");if(o&&e&&(console.log("🔄 Refresh by URL"),localStorage.removeItem("dynamic_text")),e&&!o)try{const t=JSON.parse(e);if(t.version===CURRENT_DYNAMIC_TEXT_VERSION)return document.dispatchEvent(new Event("dynamic_text-ready")),void console.log("📘 Dynamic text");localStorage.removeItem("dynamic_text")}catch(t){console.warn("Corrupted dynamic_text, refreshing..."),localStorage.removeItem("dynamic_text")}if(t){xano.setAuthToken(t);const e=(t=0)=>{const o=JSON.parse(localStorage.getItem("offices")||"{}"),n=o.country?.lang?.ISO_639,a=o.country?.ISO_3166_1_alfa_2;if(n&&a||t>=30){return{lang:n||"es",country:a||"MX"}}return new Promise((o=>{setTimeout((()=>{o(e(t+1))}),50)}))};(async()=>{try{const{lang:t,country:o}=await e(),n=`/dynamic_text?lang=${t}&country=${o}`,a=await xano.get(n);if(a?.body){const t={};a.body.flat(1/0).forEach((e=>{"object"==typeof e&&null!==e&&Object.entries(e).forEach((([e,o])=>{"string"!=typeof o&&"number"!=typeof o||(t[e]=o)}))})),localStorage.setItem("dynamic_text",JSON.stringify(t)),console.log(`📘 Dynamic text ${CURRENT_DYNAMIC_TEXT_VERSION}`),document.dispatchEvent(new Event("dynamic_text-ready"))}}catch(t){console.error("❌ dynamic_text error:",t)}})()}}