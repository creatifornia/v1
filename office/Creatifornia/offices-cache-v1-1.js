const CRUCIAL_PATHS=["country.currency.ISO_4217","club.plan_id","country.lang.ISO_639","country.ISO_3166_1_alfa_2"],MAX_RETRIES=10,RETRY_INTERVAL=200,CACHE_KEY="offices";class Offices{constructor(){this._cache=null,this._isReady=!1,this._retryCount=0}init(){document.addEventListener("DOMContentLoaded",(()=>{document.addEventListener("offices-ready",(()=>this._loadData()))}))}_loadData(){try{const e=JSON.parse(localStorage.getItem("offices")||"{}");if(this._verifyData(e))this._cache=e,this._isReady=!0,document.dispatchEvent(new Event("creatifornia-ready"));else{if(!(this._retryCount<10))throw new Error("Datos críticos no disponibles después de reintentos");this._retryCount++,setTimeout((()=>this._loadData()),200)}}catch(e){console.error("Offices Error:",e),document.dispatchEvent(new Event("offices-cache-error"))}}_verifyData(e){return CRUCIAL_PATHS.every((t=>{const s=t.split(".").reduce(((e,t)=>e?.[t]),e);return null!=s&&""!==s}))}get(e){return this._isReady?e.split(".").reduce(((e,t)=>e?.[t]),this._cache):(console.warn("Offices: Los datos no están listos"),null)}}window.Offices=new Offices,Offices.init();